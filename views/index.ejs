<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0 user-scalable=no" />

    <link rel="stylesheet" href="css/animate.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Play" rel="stylesheet">


    <!--jQeury-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/108/three.js"></script>
    <script src="lib/Detector.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
    <script src="lib/TrackballControls.js"></script>

    <title>GM E&S</title>
</head>

<body oncontextmenu="return false" ondragstart="return false" onselectstart="return false">

    <script>
        var rotationoff = false;
        var menu = false;
        function introFadeOut() {
            $(".intro").css("display", "none");
            $("div#globe").css("display", "block");
            //$(".navdiv").css("display", "inline-block");
            rotationoff = true;
        }
        function showdes_main() {
            $(".introdes-main").css("display", "block");
        }

        function hidedes_main() {
            $(".introdes-main").css("display", "none");
        }
        function showdes() {
            $(".introdes-lab").css("display", "block");
        }
        function hidedes() {
            $(".introdes-lab").css("display", "none");
        }

        function showmenu() {
            menu = !menu;
            if (menu) {
                $(".navdiv").css("display", "inline-block");
            } else {
                $(".navdiv").css("display", "none");
            }
        }

    </script>

    <div class="intro">
        <div class="animated fadeInDown" style="margin-top: 30vh; text-align:center;">
            <img src="/img/gm-logo-color.png" onmouseout="hidedes_main();" onmouseover="showdes_main();"
                style="height:20vh; display: inline-block; ">
            <img src="/img/gm-lab-logo-white.png" onmouseout="hidedes();" onmouseover="showdes();"
                onclick="introFadeOut();" style="margin-left: 100px; height:20vh; display: inline-block;">
        </div>

        <div class="introdes-main">
            <p class="lang" key="introdes-main"></p>
        </div>

        <div class="introdes-lab">
            <p class="lang" key="introdes-lab"></p>
        </div>



    </div>

    <!-- read url function for image-->
    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>

    <script>
        var arrLang = {
            'en': {
                'title': 'Fire Prevention <br> Image Cloud',
                'about': "Using their digital devices, users can upload images of fire prevention tools and infrastructures in their surroundings to the website's application. The images will be added to the collection on the website's 3D model of earth in real-time. During this process, the images will gradually undergo processing to turn from red, signaling fire and danger, to green, symbolizing safety. Not only can users upload images, they will be able to interact with the model earth to view other submissions and their corresponding information around the globe. This project will invoke direct participation from users via digital devices, therefore serving as a means to raise public awareness of social safety and fire prevention.",
                'introdes-main': 'GO TO GM E&S MAIN WEBPAGE',
                'introdes-lab': '지엠이앤에스랩 은 당사가 본질적으로 추구하는 방향인 사회와 개인 안전의식 제고를 위한 디지털 환경, 인터랙티브 콘텐츠를 디자인합니다.'

            },
            'kr': {
                'title': '화재 예방 <br> 이미지 클라우드',
                'about': "사용자는 스마트폰과 컴퓨터를 활용하여 일상생활속의 화재예방 및 진압도구 사진들을 본 웹사이트 어플리케이션에 업로드를 할 수 있다. 이미지들은 실시간으로 3D 지구 오브젝트 위에 콜라주 형태로 시각화된다. 이 과정에서 이미지의 색상은 불을 상징하는 적색에서, 안전을 상징하는 녹색으로 변환 (이미지 프로세싱) 된다. 사용자는 이미지를 업로드를 할 수 있을 뿐만 아니라, 지구형태의 오브제를 확대, 회전하여 다른 사용자들이 업로드한 이미지의 정보를 확인할 수 있다. 이번 프로젝트는 디지털 디바이스를 통한 관객의 직접적인 참여를 통하여, 화재 점검의 중요성에 대한 인식을 제고하고 화재예방 및 안전문화 발전에 기여하고자 한다.",
                'introdes-main': '지엠이앤에스 메인 홈페이지',
                'introdes-lab': '지엠이앤에스랩 은 당사가 본질적으로 추구하는 방향인 사회와 개인 안전의식 제고를 위한 디지털 환경, 인터랙티브 콘텐츠를 디자인합니다.'
            }
        };

        $(function () {
            $('.translate').click(function () {
                var lang = $(this).attr('id');
                $('.lang').each(function (index, element) {
                    $(this).html(arrLang[lang][$(this).attr('key')])
                })
            })
            $('.translate#en').trigger("click") // select the language when loads
        })



    </script>



    <div id="globe"> </div>

    <div class="kren">
        <button class="translate" id="en"> EN </button>
        <button class="translate" id="kr"> KR </button>
    </div>

    <div class="dropdownbutton" onclick="showmenu();">
        <svg xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="20" r="20" fill="white" />
        </svg>
    </div>


    <div class="navdiv">
        <p class="lang" key="title" style="font-size:30px; font-weight: 600;"></p>

        <div class="imgBox">
            <img id="blah" src="<%= typeof imgUrl != 'undefined' ? imgUrl : '' %>" class="responsive">
        </div>

        <div class="cotainer">
            <form action="/upload" method="POST" enctype="multipart/form-data">
                <div class="file-field input-field btn green darken-3" style="float:left; margin-left: 1em;">
                    <span> Upload </span>
                    <input name="myImage" type="file" onchange="readURL(this);" />
                </div>

                <div class="input-field">
                    <button type="submit" class="btn green darken-3"
                        style="float:right; margin-right: 1em; margin-top: 1em;" name="action">Submit</button>
                </div>

            </form>
        </div>


        <p class="lang" key="about"
            style="position: relative; margin-top: 5em; font-size: 15px; line-height: 1em; font-weight: 100;">
        </p>




        <!-- <h2><%= typeof msg != 'undefined' ? msg : '' %></h2> -->


        <div>
            <p style="position: relative; padding: 15px">Powered by:<br>
                <a href="https://gmens-middle.herokuapp.com/"><img src="/img/gm-logo-white.png" style="width:15vh"></a>
            </p>
        </div>
    </div>



    <script>
        const recentUploaded = "<%=imgUrl%>"
        const imageUrlArray = "<%=imgUrls%>".split(",")
        const introOffBoolean = "<%=introOff%>"
        if (introOffBoolean === "true") {
            introFadeOut();
        }
    </script>

</body>

<script src="lib/threeGeoJSON.js"></script>
<script src="js/earth.js"></script>


</html>